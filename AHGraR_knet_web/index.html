<!DOCTYPE HTML>
<html>
   <head>
      <meta charset=utf-8 />
      <script type="text/javascript">
      // Load list of available projects
         window.onload = function(){
             AHGraRWebSocketConnect("Project_List");
      };
         function AHGraRWebSocketConnect(request)
         {
            if ("WebSocket" in window)
            {
               var wsconn = new WebSocket("ws://146.118.99.190:7687/");
               wsconn.onopen = function () {wsconn.send(request);};
               wsconn.onmessage = function (evt){
               received_msg = evt.data;
               if (request == "Project_List")
               {
               SetProjectList(received_msg);
               }
               console.log(received_msg);};
            }
            else
            {
               alert("WebSocket NOT supported by your Browser!");
            }
         };
         function SetProjectList(received_msg)
         {
            select_menu = document.getElementById("select_proj");
            project_items = received_msg.split("\n");
            for(var i = 0; i < project_items.length; i++)
            {
                 project_item = project_items[i].split("\t");
                 option = document.createElement("option");
                 option.innerHTML = project_item[0];
                 option.value = project_item[1];
                 select_menu.appendChild(option);
             };
         };
      </script>
		
   </head>
   <body>
       <select id="select_proj">
       </select>
      <div id="sse">
         <a href="javascript:AHGraRWebSocketConnect('Hello')">Run WebSocket</a>
      </div>
      
   </body>
</html>
